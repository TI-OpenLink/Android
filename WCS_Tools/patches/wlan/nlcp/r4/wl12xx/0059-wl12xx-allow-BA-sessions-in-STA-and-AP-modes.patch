From f6b8297b3b32040a609677f003635adb41b4ff24 Mon Sep 17 00:00:00 2001
From: Arik Nemtsov <arik@wizery.com>
Date: Mon, 16 May 2011 14:26:50 +0300
Subject: [PATCH 59/75] wl12xx: allow BA sessions in STA and AP modes

Disallow for other operation modes
---
 drivers/net/wireless/wl12xx/init.c |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/drivers/net/wireless/wl12xx/init.c b/drivers/net/wireless/wl12xx/init.c
index d6cb117..c4c0dfe 100644
--- a/drivers/net/wireless/wl12xx/init.c
+++ b/drivers/net/wireless/wl12xx/init.c
@@ -514,9 +514,9 @@ static int wl1271_set_ba_policies(struct wl1271 *wl)
 	wl->ba_rx_bitmap = 0;
 	wl->ba_rx_session_count = 0;
 
-	/* BA not supported in AP mode */
-	/* TODO: remove when BA AP-mode support is added */
-	if (wl->bss_type == BSS_TYPE_AP_BSS) {
+	/* BA is supported in STA/AP modes */
+	if (wl->bss_type != BSS_TYPE_AP_BSS &&
+	    wl->bss_type != BSS_TYPE_STA_BSS) {
 		wl->ba_support = false;
 		return 0;
 	}
-- 
1.7.0.4

